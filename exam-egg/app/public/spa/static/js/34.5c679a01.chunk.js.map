{"version":3,"sources":["components/BaseContent.jsx","page/editExam/style.module.less","page/editExam/index.js"],"names":["Content","BaseContent","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","style","Object","C_Users_yihan_Desktop_react_exam_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","background","padding","margin","marginBottom","borderRadius","this","props","React","Children","map","children","item","Component","module","exports","exam","juan","questionitem","basePath","UtilGlobal","QuestionItem","_this","C_Users_yihan_Desktop_react_exam_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_7__","C_Users_yihan_Desktop_react_exam_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_9__","C_Users_yihan_Desktop_react_exam_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_10__","call","remove","onRemoveCallback","state","_this$props","title","questions_stem","index","react__WEBPACK_IMPORTED_MODULE_12___default","className","styles","href","float","onClick","react_markdown__WEBPACK_IMPORTED_MODULE_13___default","source","AddExam","connect","store","C_Users_yihan_Desktop_react_exam_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_6__","addExam","main","dispatch","initData","payload","type","updateExam","_this2","questions","antd_es_modal__WEBPACK_IMPORTED_MODULE_5__","confirm","content","okText","cancelText","onOk","splice","setState","onClose","visible","createExam","id","examDetail","exam_exam_id","question_ids","JSON","stringify","questions_id","then","history","push","pathname","parent","child","_this3","_components_BaseContent__WEBPACK_IMPORTED_MODULE_15__","antd_es_button__WEBPACK_IMPORTED_MODULE_3__","assign","key","antd_es_drawer__WEBPACK_IMPORTED_MODULE_1__","placement","closable","width"],"mappings":"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","file":"static/js/34.5c679a01.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport {Layout} from 'antd';\r\nconst {Content } = Layout;\r\n\r\nclass BaseContent extends Component {\r\n    render() {\r\n      return (\r\n        <Content style={{\r\n          background: '#fff', padding: 24, margin: 0, marginBottom: 20,\r\n          borderRadius: 10,\r\n          ...this.props.style\r\n        }}>\r\n          {React.Children.map(this.props.children,item=>item)}\r\n        </Content>\r\n      )\r\n    }\r\n}\r\n\r\nexport default BaseContent;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"exam\":\"style_exam__2OWgj\",\"juan\":\"style_juan__3nu6q\",\"questionitem\":\"style_questionitem__3BYam\"};","import React, { Component } from 'react'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport {\r\n  Form, Input, DatePicker, Button, Row, Col, Select, Modal, Drawer\r\n} from 'antd';\r\nimport {connect} from 'dva'\r\n\r\nimport BaseContent from '@/components/BaseContent'\r\nimport UtilGlobal from '../../utils/global'\r\nimport styles from './style.module.less'\r\n\r\nconst {basePath} = UtilGlobal;\r\n\r\nclass QuestionItem extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {}\r\n  }\r\n\r\n  remove = () => {\r\n    this.props.onRemoveCallback()\r\n  }\r\n\r\n  render () {\r\n    const {title, questions_stem, index, } = this.props;\r\n\r\n    return (\r\n      <div className={styles.questionitem}>\r\n        <h4>{index}：{title} <a href=\"javascript:;\" style={{float: 'right'}} onClick={this.remove}>删除</a></h4>\r\n        <ReactMarkdown className=\"react-markdown\" source={questions_stem}></ReactMarkdown>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nlet mapState = store=>{\r\n  return {...store.addExam, ...store.main}\r\n}\r\nlet mapDispatch = dispatch => {\r\n  return {\r\n    initData(payload){\r\n      dispatch({type:'addExam/requestData', ...payload});\r\n    },\r\n    updateExam (payload) {\r\n      return dispatch({type:'addExam/updateExam', ...payload});\r\n    }\r\n  }\r\n}\r\n\r\n@connect(mapState,mapDispatch)\r\nclass AddExam extends Component {\r\n\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      questions: this.props.examDetail.questions,\r\n      visible: false\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.props.initData()\r\n  }\r\n\r\n  onRemoveCallback = (index) => {\r\n    const {questions} = this.state\r\n    Modal.confirm({\r\n      title: '确认提示',\r\n      content: '是否要删除该题目？',\r\n      okText: '确认',\r\n      cancelText: '取消',\r\n      onOk: () => {\r\n        questions.splice(index, 1)\r\n        this.setState({\r\n          questions: questions\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n\r\n  createExam = () => {\r\n    this.props.updateExam({\r\n      id: this.props.examDetail.exam_exam_id,\r\n      question_ids: JSON.stringify(this.state.questions.map((item) => {\r\n        return item.questions_id\r\n      }))\r\n    }).then(() => {\r\n      this.props.history.push({\r\n        pathname: basePath + '/main/exam/list',\r\n        state:{\r\n          parent:'考试管理',\r\n          child:'试卷列表',\r\n          id:'main-examList'\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  render() {\r\n    const {examDetail} = this.props\r\n    const {questions} = this.state\r\n\r\n    return (\r\n      <BaseContent>\r\n        <Button onClick={() => this.setState({visible: true})}>添加新题</Button>\r\n        <div className={styles.exam}>\r\n          <h2>{examDetail.title}</h2>\r\n          <p>考试时间：1小时30分钟\t\t监考人：刘于       开始考试时间：2018.9.10  10:00  阅卷人：刘于</p>\r\n          <span className={styles.juan}></span>\r\n          <div>\r\n            {\r\n              questions.map((item, index) => <QuestionItem {...item} index={index+1} key={index} onRemoveCallback={() => this.onRemoveCallback(index)} />)\r\n            }\r\n          </div>\r\n          <Button type=\"primary\" onClick={this.createExam}>\r\n            创建试卷\r\n          </Button>\r\n        </div>\r\n\r\n        <Drawer\r\n          title=\"所有题目\"\r\n          placement='right'\r\n          closable={false}\r\n          width={640}\r\n          onClose={this.onClose}\r\n          visible={this.state.visible}\r\n        >\r\n          <p>Some contents...</p>\r\n          <p>Some contents...</p>\r\n          <p>Some contents...</p>\r\n        </Drawer>\r\n      </BaseContent>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AddExam\r\n"],"sourceRoot":""}