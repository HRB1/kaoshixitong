{"version":3,"sources":["webpack:///./src/components/Login/index.less?351c","page/login/login.module.css","components/Login/index.less","components/Login/sub/map.js","components/Login/sub/context.js","components/Login/sub/item.js","components/Login/sub/submit.js","components/Login/index.js","page/login/index.jsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","group","wraper","login-wraper","push","map","UserName","props","size","id","prefix","react_default","a","createElement","icon","type","className","styles","prefixIcon","placeholder","rules","required","message","Password","pattern","Mobile","Captcha","LoginContext","createContext","FormItem","es_form","Item","WrapFormItem","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onGetCaptcha","result","Promise","then","runGetCaptchaCountDown","getFormItemOptions","_ref","onChange","defaultValue","customprops","initialValue","count","countDown","setState","interval","setInterval","clearInterval","state","_this$props","updateActive","name","getFieldDecorator","form","_this$props2","getCaptchaButtonText","getCaptchaSecondText","restProps","objectWithoutProperties","otherProps","inputProps","omit","row","gutter","col","span","input","assign","es_button","disabled","getCaptcha","onClick","concat","Component","defaultProps","LoginItem","keys","ItemMap","forEach","key","item","sub_context","Consumer","context","item_WrapFormItem","LoginSubmit","rest","clsString","classNames","submit","htmlType","Login","onSwitch","onTabChange","getContext","tabs","tabUtil","addTab","toConsumableArray","removeTab","filter","currentId","activeItem","_this$state","active","handleSubmit","e","preventDefault","_this$state2","onSubmit","activeFileds","validateFields","force","err","values","defaultActiveKey","children","_this$state3","TabChildren","otherChildren","React","Children","typeName","Provider","value","login","length","Fragment","es_tabs","animated","activeKey","Tab","LoginTab","Submit","src_components_Login","create","LoginDemo","connect","store","window","objectSpread","notice","autoLogin","user_name","user_pwd","changeAutoLogin","ev","target","checked","userInfo","JSON","parse","sessionStorage","getItem","error","console","log","setItem","stringify","dispatch","_this2","style","formLogin","es_alert","marginBottom","showIcon","closable","es_checkbox","float","href","width"],"mappings":"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","file":"static/js/11.7d3d35a6.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"group\":\"login_group__1YKG7\",\"wraper\":\"login_wraper__2undA\",\"login-wraper\":\"login_login-wraper__cBm5w\"};","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\\n/* stylelint-disable no-duplicate-selectors */\\n/* stylelint-disable */\\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\\n.login .ant-tabs .ant-tabs-bar {\\n  margin-bottom: 24px;\\n  text-align: center;\\n  border-bottom: 0;\\n}\\n.login .ant-form-item {\\n  margin: 0 2px 24px;\\n}\\n.login .getCaptcha {\\n  display: block;\\n  width: 100%;\\n}\\n.login .icon {\\n  margin-left: 16px;\\n  color: rgba(0, 0, 0, 0.2);\\n  font-size: 24px;\\n  vertical-align: middle;\\n  cursor: pointer;\\n  transition: color 0.3s;\\n}\\n.login .icon:hover {\\n  color: #0139FD;\\n}\\n.login .other {\\n  margin-top: 24px;\\n  line-height: 22px;\\n  text-align: left;\\n}\\n.login .other .register {\\n  float: right;\\n}\\n.login .prefixIcon {\\n  color: rgba(0, 0, 0, 0.25);\\n  font-size: 14px;\\n}\\n.login .submit {\\n  width: 100%!important;\\n  margin-top: 24px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\r\n * @Author: heinan \r\n * @Date: 2019-03-15 09:39:20 \r\n * @Last Modified by: heinan\r\n * @Last Modified time: 2019-03-16 11:56:48\r\n * @Describe: 设置渲染表单元素的输入框类型及校验规则\r\n */\r\nimport React from 'react';\r\nimport { Icon } from 'antd';\r\nimport styles from '../index.less';\r\n\r\nexport default {\r\n  UserName: {\r\n    props: {\r\n      size: 'large',\r\n      id: 'userName',\r\n      prefix: <Icon type=\"user\" className={styles.prefixIcon} />,\r\n      placeholder: '请输入用户名',\r\n    },\r\n    rules: [\r\n      {\r\n        required: true,\r\n        message: '请输入你的用户名!',\r\n      },\r\n    ],\r\n  },\r\n  Password: {\r\n    props: {\r\n      size: 'large',\r\n      prefix: <Icon type=\"lock\" className={styles.prefixIcon} />,\r\n      type: 'password',\r\n      id: 'password',\r\n      placeholder: '请输入用户密码',\r\n    },\r\n    rules: [\r\n      {\r\n        required: true,\r\n        message: '请输入你的密码!',\r\n      }, {\r\n        pattern: /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/,\r\n        message: '密码校验失败!密码包含大小写字母、数字、特殊符号',\r\n      }\r\n    ],\r\n  },\r\n  Mobile: {\r\n    props: {\r\n      size: 'large',\r\n      prefix: <Icon type=\"mobile\" className={styles.prefixIcon} />,\r\n      placeholder: 'mobile number',\r\n    },\r\n    rules: [\r\n      {\r\n        required: true,\r\n        message: 'Please enter mobile number!',\r\n      },\r\n      {\r\n        pattern: /^1\\d{10}$/,\r\n        message: 'Wrong mobile number format!',\r\n      },\r\n    ],\r\n  },\r\n  Captcha: {\r\n    props: {\r\n      size: 'large',\r\n      prefix: <Icon type=\"mail\" className={styles.prefixIcon} />,\r\n      placeholder: 'captcha',\r\n    },\r\n    rules: [\r\n      {\r\n        required: true,\r\n        message: 'Please enter Captcha!',\r\n      },\r\n    ],\r\n  },\r\n};\r\n","import { createContext } from 'react';\r\nconst LoginContext = createContext();\r\nexport default LoginContext;\r\n","import React, { Component } from 'react';\r\nimport { Form, Input, Button, Row, Col } from 'antd';\r\nimport omit from 'omit.js';\r\nimport styles from '../index.less';\r\nimport ItemMap from './map';\r\nimport LoginContext from './context';\r\n\r\nconst FormItem = Form.Item;\r\n\r\nclass WrapFormItem extends Component {\r\n  static defaultProps = {\r\n    getCaptchaButtonText: 'captcha',\r\n    getCaptchaSecondText: 'second',\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      count: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { updateActive, name } = this.props;\r\n    if (updateActive) {\r\n      updateActive(name);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  onGetCaptcha = () => {\r\n    const { onGetCaptcha } = this.props;\r\n    const result = onGetCaptcha ? onGetCaptcha() : null;\r\n    if (result === false) {\r\n      return;\r\n    }\r\n    if (result instanceof Promise) {\r\n      result.then(this.runGetCaptchaCountDown);\r\n    } else {\r\n      this.runGetCaptchaCountDown();\r\n    }\r\n  };\r\n\r\n  getFormItemOptions = ({ onChange, defaultValue, customprops, rules }) => {\r\n    const options = {\r\n      rules: rules || customprops.rules,\r\n    };\r\n    if (onChange) {\r\n      options.onChange = onChange;\r\n    }\r\n    if (defaultValue) {\r\n      options.initialValue = defaultValue;\r\n    }\r\n    return options;\r\n  };\r\n\r\n  runGetCaptchaCountDown = () => {\r\n    const { countDown } = this.props;\r\n    let count = countDown || 59;\r\n    this.setState({ count });\r\n    this.interval = setInterval(() => {\r\n      count -= 1;\r\n      this.setState({ count });\r\n      if (count === 0) {\r\n        clearInterval(this.interval);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  render() {\r\n    const { count } = this.state;\r\n\r\n    const {\r\n      form: { getFieldDecorator },\r\n    } = this.props;\r\n\r\n    // 这么写是为了防止restProps中 带入 onChange, defaultValue, rules props\r\n    const {\r\n      onChange,\r\n      customprops,\r\n      defaultValue,\r\n      rules,\r\n      name,\r\n      getCaptchaButtonText,\r\n      getCaptchaSecondText,\r\n      updateActive,\r\n      type,\r\n      ...restProps\r\n    } = this.props;\r\n\r\n    // get getFieldDecorator props\r\n    const options = this.getFormItemOptions(this.props);\r\n\r\n    const otherProps = restProps || {};\r\n    if (type === 'Captcha') {\r\n      const inputProps = omit(otherProps, ['onGetCaptcha', 'countDown']);\r\n      return (\r\n        <FormItem>\r\n          <Row gutter={8}>\r\n            <Col span={16}>\r\n              {getFieldDecorator(name, options)(<Input {...customprops} {...inputProps} />)}\r\n            </Col>\r\n            <Col span={8}>\r\n              <Button\r\n                disabled={count}\r\n                className={styles.getCaptcha}\r\n                size=\"large\"\r\n                onClick={this.onGetCaptcha}\r\n              >\r\n                {count ? `${count} ${getCaptchaSecondText}` : getCaptchaButtonText}\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </FormItem>\r\n      );\r\n    }\r\n    return (\r\n      <FormItem>\r\n        {getFieldDecorator(name, options)(<Input {...customprops} {...otherProps} />)}\r\n      </FormItem>\r\n    );\r\n  }\r\n}\r\n\r\nconst LoginItem = {};\r\nObject.keys(ItemMap).forEach(key => {\r\n  const item = ItemMap[key];\r\n  LoginItem[key] = props => (\r\n    <LoginContext.Consumer>\r\n      {context => (\r\n        <WrapFormItem\r\n          customprops={item.props}\r\n          rules={item.rules}\r\n          {...props}\r\n          type={key}\r\n          updateActive={context.updateActive}\r\n          form={context.form}\r\n        />\r\n      )}\r\n    </LoginContext.Consumer>\r\n  );\r\n});\r\n\r\nexport default LoginItem;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Button, Form } from 'antd';\r\nimport styles from '../index.less';\r\n\r\nconst FormItem = Form.Item;\r\n\r\nconst LoginSubmit = ({ className, ...rest }) => {\r\n  const clsString = classNames(styles.submit, className);\r\n  return (\r\n    <div>\r\n      <Button size=\"large\" className={clsString} type=\"primary\" htmlType=\"submit\" {...rest} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginSubmit;\r\n","/*\r\n * @Author: heinan \r\n * @Date: 2019-03-14 12:20:00 \r\n * @Last Modified by: heinan\r\n * @Last Modified time: 2019-03-15 09:30:14\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { Form, Tabs } from 'antd';\r\nimport LoginItem from './sub/item';\r\nimport LoginTab from './sub/item';\r\nimport LoginSubmit from './sub/submit';\r\nimport LoginContext from './sub/context';\r\nimport styles from './index.less';\r\n\r\nclass Login extends Component {\r\n  //执行传参数据类型\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    defaultActiveKey: PropTypes.string,\r\n    onTabChange: PropTypes.func,\r\n    onSubmit: PropTypes.func,\r\n  };\r\n  //设置默认参数\r\n  static defaultProps = {\r\n    className: '',\r\n    defaultActiveKey: '',\r\n    onTabChange: () => {},\r\n    onSubmit: () => {},\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      type: props.defaultActiveKey,\r\n      tabs: [],\r\n      active: {},\r\n    };\r\n  }\r\n  //设置当前tab选中状态\r\n  onSwitch = type => {\r\n    this.setState({\r\n      type,\r\n    });\r\n    const { onTabChange } = this.props;\r\n    onTabChange(type);\r\n  };\r\n\r\n  getContext = () => {\r\n    const { tabs } = this.state;\r\n    const { form } = this.props;\r\n    return {\r\n      tabUtil: {\r\n        addTab: id => {\r\n          this.setState({\r\n            tabs: [...tabs, id],\r\n          });\r\n        },\r\n        removeTab: id => {\r\n          this.setState({\r\n            tabs: tabs.filter(currentId => currentId !== id),\r\n          });\r\n        },\r\n      },\r\n      form,\r\n      updateActive: activeItem => {\r\n        const { type, active } = this.state;\r\n        if (active[type]) {\r\n          active[type].push(activeItem);\r\n        } else {\r\n          active[type] = [activeItem];\r\n        }\r\n        this.setState({\r\n          active,\r\n        });\r\n      },\r\n    };\r\n  };\r\n  //表单提交事件\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const { active, type } = this.state;\r\n    const { form, onSubmit } = this.props;\r\n    const activeFileds = active[type];\r\n    form.validateFields(activeFileds, { force: true }, (err, values) => {\r\n      onSubmit(err, values);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { className, children } = this.props;\r\n    const { type, tabs } = this.state;\r\n    const TabChildren = [];\r\n    const otherChildren = [];\r\n    //遍历传入的子元素, 其他类型的tab保存到otherChildren\r\n    React.Children.forEach(children, item => {\r\n      if (!item) {\r\n        return;\r\n      }\r\n      if (item.type.typeName === 'LoginTab') {\r\n        TabChildren.push(item);\r\n      } else {\r\n        otherChildren.push(item);\r\n      }\r\n    });\r\n    return (\r\n      <LoginContext.Provider value={this.getContext()}>\r\n        <div className={classNames(className, styles.login)}>\r\n          <Form onSubmit={this.handleSubmit}>\r\n            {tabs.length ? (\r\n              <React.Fragment>\r\n                <Tabs\r\n                  animated={false}\r\n                  className={styles.tabs}\r\n                  activeKey={type}\r\n                  onChange={this.onSwitch}\r\n                >\r\n                  {TabChildren}\r\n                </Tabs>\r\n                {otherChildren}\r\n              </React.Fragment>\r\n            ) : (\r\n              children\r\n            )}\r\n          </Form>\r\n        </div>\r\n      </LoginContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.Tab = LoginTab;\r\nLogin.Submit = LoginSubmit;\r\nObject.keys(LoginItem).forEach(item => {\r\n  Login[item] = LoginItem[item];\r\n});\r\n\r\nexport default Form.create()(Login);\r\n","import React, { Component } from 'react'\r\nimport { Checkbox,Alert } from 'antd';\r\n\r\nimport { connect } from 'dva'\r\nimport style from './login.module.css'\r\nimport Login from '@/components/Login';\r\nconst { UserName, Password, Submit } = Login;\r\n\r\nlet mapState = store => {\r\n  window.store = store;\r\n  return { ...store.login }\r\n}\r\n\r\n@connect(mapState)\r\nclass LoginDemo extends Component {\r\n  state = {\r\n    notice: '',\r\n    autoLogin: false,\r\n    user_name: '',\r\n    user_pwd: ''\r\n  }\r\n  formLogin(error, values) {\r\n    if (error !== null) return;\r\n    let { user_name, user_pwd } = values;\r\n    console.log(user_name,user_pwd);\r\n    sessionStorage.setItem('userInfo', JSON.stringify({ user_name, user_pwd }));\r\n    this.props.dispatch({ type: 'login/login', user_name, user_pwd });\r\n  }\r\n  changeAutoLogin = ev => {\r\n    this.setState({ autoLogin: ev.target.checked }, () => {\r\n      if (this.state.autoLogin) {\r\n        let userInfo = JSON.parse(sessionStorage.getItem('userInfo'));\r\n        if (!userInfo) {\r\n          return;\r\n        }\r\n        let { user_name, user_pwd } = userInfo;\r\n        this.setState({ user_name, user_pwd })\r\n      } else {\r\n        this.setState({ user_name: '', user_pwd: '' })\r\n      }\r\n    });\r\n  }\r\n  render() {\r\n    return <div className={style.wraper}>\r\n      <Login\r\n        className={style['login-wraper']}\r\n        defaultActiveKey={this.state.type}\r\n        onTabChange={this.onTabChange}\r\n        onSubmit={(error, values) => {\r\n          this.formLogin(error, values);\r\n        }}\r\n      >\r\n        <div>\r\n          {\r\n            this.state.notice &&\r\n            <Alert style={{ marginBottom: 24 }} message={this.state.notice} type=\"error\" showIcon closable />\r\n          }\r\n          <UserName name=\"user_name\" />\r\n          <Password name=\"user_pwd\" />\r\n        </div>\r\n        <div className='ant-form-item'>\r\n          <Checkbox checked={this.state.autoLogin} onChange={ev => this.changeAutoLogin(ev)}>记住密码</Checkbox>\r\n          <a style={{ float: 'right' }} href=\"\">忘记密码</a>\r\n        </div>\r\n        <Submit style={{ width: '100%' }}>登陆</Submit>\r\n      </Login>\r\n    </div>\r\n  }\r\n}\r\nexport default LoginDemo;"],"sourceRoot":""}